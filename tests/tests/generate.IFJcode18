.IFJcode18
DEFVAR GF@$des
DEFVAR GF@$des1
DEFVAR GF@$des2
DEFVAR GF@$eq
DEFVAR GF@$jump
DEFVAR GF@$tmp
DEFVAR GF@$type
MOVE GF@$des nil@nil

WRITE string@Zadejte␣cislo␣pro␣vypocet␣faktorialu:␣
DEFVAR GF@a
MOVE GF@a int@1
TYPE GF@$type GF@a
JUMPIFNEQ $$GT$1$int$string1 GF@$type string@string
EXIT int@4
LABEL $$GT$1$int$string1
MOVE GF@$des int@0
JUMPIFNEQ $$GT$1$int$float1 GF@$type string@float
INT2FLOAT GF@$des int@0
LABEL $$GT$1$int$float1
MOVE GF@$eq GF@$des
LT GF@$des GF@a GF@$des
PUSHS GF@$des
DEFVAR GF@vysl
PUSHS bool@false
JUMPIFEQS $if$0

WRITE string@\010Faktorial␣nelze␣spocitat\010

JUMP $endif$0
LABEL $if$0

MOVE GF@vysl int@1

LABEL $while$0
TYPE GF@$type GF@a
JUMPIFNEQ $$GT$3$int$string1 GF@$type string@string
EXIT int@4
LABEL $$GT$3$int$string1
MOVE GF@$des int@0
JUMPIFNEQ $$GT$3$int$float1 GF@$type string@float
INT2FLOAT GF@$des int@0
LABEL $$GT$3$int$float1
MOVE GF@$eq GF@$des
GT GF@$des GF@a GF@$des
PUSHS GF@$des
PUSHS bool@false
 JUMPIFEQS $end_while$0

TYPE GF@$type GF@vysl
JUMPIFEQ $$GT$4$int0 GF@$type string@int
JUMPIFEQ $$GT$4$float0 GF@$type string@float
JUMPIFEQ $$GT$4$string0 GF@$type string@string
LABEL $$GT$4$int0
TYPE GF@$type GF@a
JUMPIFNEQ $$GT$4$int$string GF@$type string@string
EXIT int@4
LABEL $$GT$4$int$string
MOVE GF@$des GF@vysl
JUMPIFNEQ $$GT$4$int$float GF@$type string@float
INT2FLOAT GF@$des GF@vysl
LABEL $$GT$4$int$float
MOVE GF@$eq GF@$des
MUL GF@$des GF@$des GF@a
JUMP ENDTHISMADNESS4
LABEL $$GT$4$float0
TYPE GF@$type GF@a
JUMPIFNEQ $$GT$4$float$string GF@$type string@string
EXIT int@4
LABEL $$GT$4$float$string
MOVE GF@$des GF@a
JUMPIFEQ $$GT$4$float GF@$type string@float
INT2FLOAT GF@$des GF@a
LABEL $$GT$4$float
MOVE GF@$eq GF@$des
MUL GF@$des GF@vysl GF@$des
JUMP ENDTHISMADNESS4
LABEL $$GT$4$string0
TYPE GF@$type GF@a
JUMPIFEQ $$GT$4$string$string GF@$type string@string
EXIT int@4
LABEL $$GT$4$string$string
MOVE GF@$des GF@vysl
MUL GF@$des GF@$des GF@a
LABEL ENDTHISMADNESS4
PUSHS GF@$des
POPS GF@vysl
TYPE GF@$type GF@a
JUMPIFNEQ $$GT$5$int$string1 GF@$type string@string
EXIT int@4
LABEL $$GT$5$int$string1
MOVE GF@$des int@1
JUMPIFNEQ $$GT$5$int$float1 GF@$type string@float
INT2FLOAT GF@$des int@1
LABEL $$GT$5$int$float1
MOVE GF@$eq GF@$des
SUB GF@$des GF@a GF@$des
PUSHS GF@$des
POPS GF@a

JUMP $while$0
LABEL $end_while$0

PUSHS nil@nil
WRITE string@\010Vysledek␣je:
WRITE GF@vysl
WRITE string@\010
LABEL $endif$0

